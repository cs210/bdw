%% PIXEL DIRECTIONS CLASS %%
classdef PixelDirections
   enumeration
      TopLeft, TopCenter, TopRight, ...
      Left, Right, ...
      BottomLeft, BottomCenter, BottomRight,  ...
      None %No pixel found
   end
   methods(Static)
       function newPixelDirection = findNeighbourPixelDirection(image, row, column)
           [rows, columns, ~] = size(image);
            if (row == 1)
                if (column == 1)
                    %Only check right, bottomright, bottomcenter
                elseif (column == columns)
                    %Only check right, topright, topcenter
                else
                    %Only check right, bottomright, bottomcenter, topright, topcenter
                    if (image(row-1, column) > 150)
                        newPixelDirection = PixelDirections.Right;
                    elseif (image(row-1, column-1) > 150)
                        newPixelDirection = PixelDirections.BottomLeft;
                    elseif (image(row, column-1) > 150)
                        newPixelDirection = PixelDirections.BottomCenter;
                    elseif (image(row+1, column-1) > 150)
                        newPixelDirection = PixelDirections.TopLeft;
                    elseif (image(row+1, column) > 150)
                        newPixelDirection = PixelDirections.TopCenter;
                    else
                        newPixelDirection = PixelDirections.None;
                    end
                end
            elseif (row == rows)
                if (column == 1)
                    %Only check left, bottomleft, bottomcenter
                    if (image(row-1, column) > 150)
                        newPixelDirection = PixelDirections.Left;
                    elseif (image(row, column+1) > 150)
                        newPixelDirection = PixelDirections.BottomCenter;
                    elseif (image(row-1, column+1) > 150)
                        newPixelDirection = PixelDirections.BottomLeft;
                    else
                        newPixelDirection = PixelDirections.None;
                    end
                elseif (column == columns)
                    %Only check left, topleft, topcenter
                    if (image(row-1, column) > 150)
                        newPixelDirection = PixelDirections.Left;
                    elseif (image(row-1, column-1) > 150)
                        newPixelDirection = PixelDirections.TopLeft;
                    elseif (image(row, column-1) > 150)
                        newPixelDirection = PixelDirections.TopCenter;
                    else
                        newPixelDirection = PixelDirections.None;
                    end
                else
                    %Only check left, bottomleft, bottomcenter, topleft,
                    %topcenter
                    if (image(row-1, column) > 150)
                        newPixelDirection = PixelDirections.Left;
                    elseif (image(row-1, column-1) > 150)
                        newPixelDirection = PixelDirections.TopLeft;
                    elseif (image(row, column-1) > 150)
                        newPixelDirection = PixelDirections.TopCenter;
                    elseif (image(row, column+1) > 150)
                        newPixelDirection = PixelDirections.BottomCenter;
                    elseif (image(row-1, column+1) > 150)
                        newPixelDirection = PixelDirections.BottomLeft;
                    else
                        newPixelDirection = PixelDirections.None;
                    end
                end
            else
                if (column == 1)
                    %Only check left, bottomleft, bottomcenter,
                    %bottomright, right
                    if (image(row-1, column) > 150)
                        newPixelDirection = PixelDirections.Left;
                    elseif (image(row+1, column) > 150)
                        newPixelDirection = PixelDirections.Right;
                    elseif (image(row+1, column+1) > 150)
                        newPixelDirection = PixelDirections.BottomRight;
                    elseif (image(row, column+1) > 150)
                        newPixelDirection = PixelDirections.BottomCenter;
                    elseif (image(row-1, column+1) > 150)
                        newPixelDirection = PixelDirections.BottomLeft;
                    else
                        newPixelDirection = PixelDirections.None;
                    end
                elseif (column == columns)
                    %Only check left, topleft, topcenter, topright, right
                    if (image(row-1, column) > 150)
                        newPixelDirection = PixelDirections.Left;
                    elseif (image(row-1, column-1) > 150)
                        newPixelDirection = PixelDirections.TopLeft;
                    elseif (image(row, column-1) > 150)
                        newPixelDirection = PixelDirections.TopCenter;
                    elseif (image(row+1, column-1) > 150)
                        newPixelDirection = PixelDirections.TopRight;
                    elseif (image(row+1, column) > 150)
                        newPixelDirection = PixelDirections.Right;
                    else
                        newPixelDirection = PixelDirections.None;
                    end
                else
                    %Check everything
                    if (image(row-1, column) > 150)
                        newPixelDirection = PixelDirections.Left;
                    elseif (image(row-1, column-1) > 150)
                        newPixelDirection = PixelDirections.TopLeft;
                    elseif (image(row, column-1) > 150)
                        newPixelDirection = PixelDirections.TopCenter;
                    elseif (image(row+1, column-1) > 150)
                        newPixelDirection = PixelDirections.TopRight;
                    elseif (image(row+1, column) > 150)
                        newPixelDirection = PixelDirections.Right;
                    elseif (image(row+1, column+1) > 150)
                        newPixelDirection = PixelDirections.BottomRight;
                    elseif (image(row, column+1) > 150)
                        newPixelDirection = PixelDirections.BottomCenter;
                    elseif (image(row-1, column+1) > 150)
                        newPixelDirection = PixelDirections.BottomLeft;
                    else
                        newPixelDirection = PixelDirections.None;
                    end
                end
            end
       end
       
       function isActive = CheckActivePixel(image, row, column, direction)
            switch(direction)
                case PixelDirections.TopLeft
                    isActive = (image(row-1, column-1) > 150)
                case PixelDirections.TopCenter
                    isActive = (image(row, column-1) > 150)
                case PixelDirections.TopRight
                    isActive = (image(row+1, column-1) > 150)
                case PixelDirections.Left
                    isActive = (image(row-1, column) > 150)
                case PixelDirections.Right
                    isActive = (image(row+1, column) > 150)
                case PixelDirections.BottomLeft
                    isActive = (image(row-1, column+1) > 150)
                case PixelDirections.BottomCenter
                    isActive = (image(row, column+1) > 150)
                case PixelDirections.BottomRight
                    isActive = (image(row+1, column+1) > 150)
            end
       end
        
       function didFind = PixelChecker(image, row, column, direction, depth)
           % Add error checking here
           switch(direction)
              case PixelDirections.TopLeft
                  %Check if the topleft, center, or left pixel are active
                   active = PixelChecker(image, row, column, PixelDirection.TopLeft)
                   if (~(active))
                       active = PixelChecker(image, row, column, PixelDirection.TopCenter)
                       if (~(active))
                           active = PixelChecker(image, row, column, PixelDirection.Left)
                       end
                   end
                   didFind = active;
               case PixelDirections.TopCenter   
                   %Check if the topleft, center, or topright pixel are active
                   active = PixelChecker(image, row, column, PixelDirection.TopLeft)
                   if (~(active))
                       active = PixelChecker(image, row, column, PixelDirection.TopCenter)
                       if (~(active))
                           active = PixelChecker(image, row, column, PixelDirection.TopRight)
                       end
                   end
                   didFind = active;
               case PixelDirections.TopRight 
                   %Check if the topcenter, topright, right pixel are active
                   active = PixelChecker(image, row, column, PixelDirection.TopCenter)
                   if (~(active))
                       active = PixelChecker(image, row, column, PixelDirection.TopRight)
                       if (~(active))
                           active = PixelChecker(image, row, column, PixelDirection.Right)
                       end
                   end
                   didFind = active;
               case PixelDirections.Right 
                   %Check if the Topright, right, bottomright pixel are active
                   active = PixelChecker(image, row, column, PixelDirection.Right)
                   if (~(active))
                       active = PixelChecker(image, row, column, PixelDirection.TopRight)
                       if (~(active))
                           active = PixelChecker(image, row, column, PixelDirection.BottomRight)
                       end
                   end
                   didFind = active;

                case PixelDirections.BottomRight 
                   %Check if the right, bottomright, bottomcenter pixel are active
                   active = PixelChecker(image, row, column, PixelDirection.Right)
                   if (~(active))
                       active = PixelChecker(image, row, column, PixelDirection.BottomCenter)
                       if (~(active))
                           active = PixelChecker(image, row, column, PixelDirection.BottomRight)
                       end
                   end
                   didFind = active;

               case PixelDirections.BottomCenter 
                   %Check if the bottomright, bottomcenter, bottomleft pixel are active
                   active = PixelChecker(image, row, column, PixelDirection.BottomRight)
                   if (~(active))
                       active = PixelChecker(image, row, column, PixelDirection.BottomCenter)
                       if (~(active))
                           active = PixelChecker(image, row, column, PixelDirection.BottomLeft)
                       end
                   end
                   didFind = active;

               case PixelDirections.BottomLeft 
                   %Check if the bottomcenter, bottomleft, left pixel are active
                   active = PixelChecker(image, row, column, PixelDirection.BottomCenter)
                   if (~(active))
                       active = PixelChecker(image, row, column, PixelDirection.BottomLeft)
                       if (~(active))
                           active = PixelChecker(image, row, column, PixelDirection.Left)
                       end
                   end
                   didFind = active;

               case PixelDirections.Left 
                   %Check if the bottomleft, left, topleft pixel are active
                   active = PixelChecker(image, row, column, PixelDirection.BottomLeft)
                   if (~(active))
                       active = PixelChecker(image, row, column, PixelDirection.Left)
                       if (~(active))
                           active = PixelChecker(image, row, column, PixelDirection.TopLeft)
                       end
                   end
                   didFind = active;
           end
       end
   end
end